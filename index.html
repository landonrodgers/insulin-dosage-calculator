<!DOCTYPE html>
<html>
<link rel="stylesheet" href="style.css">
<section id="disclaimer">
 <b>DISCLAIMER:</b>This website was made as a personal project and is not to be used for actual dosing.
  I cannot make any gurantees on the accuracy of any calculations that the website returns. 
</section>
<section>
  <p>
    <label for="n1">What is your current bloodsugar in mg/dL?<abbr title="This field is mandatory" aria-label="required">*</abbr></label>
    <!-- The pattern attribute can act as a fallback for browsers which
         don't implement the number input type but support the pattern attribute.
         Please note that browsers that support the pattern attribute will make it
         fail silently when used with a number field.
         Its usage here acts only as a fallback -->
    <input type="number" min="70" max="500" step="1" id = "number1"
           pattern="\d+">
  </p>
  <p>
    <label for="n2">How many grams of carbohydrates are you going to eat?<abbr title="This field is mandatory" aria-label="required">*</abbr></label>
    <input type="number" min="0" max="300" step="1" id="number2"
           pattern="\d+">
  </p>
  <p>
    <label for="n3">One unit of insulin covers how many grams of carbohydrates?<abbr title="This field is mandatory" aria-label="required">*</abbr></label>
    <input type="number" min="0" max="300" step="1" id="number3"
           pattern="\d+">
  </p>
  <p>
    <label for="n4">One unit of insulin lowers your bloodsugar by how many mg/dL?<abbr title="This field is mandatory" aria-label="required">*</abbr></label>
    <input type="number" min="0" max="150" step="1" id="number4"
           pattern="\d+">
  </p>
  <p>
    <label for="n5">What is your target bloodsugar?<abbr title="This field is mandatory" aria-label="required">*</abbr></label>
    <input type="number" min="0" max="300" step="1" id="number5"
           pattern="\d+">
  </p>
  <button onclick="myFunction()">Try it</button>
</section>
<div id="calculatedDoseBox"></div>
<div id="errorBox"></div>
</html>
<script>
  function myFunction() {
  document.getElementById("errorBox").style.border = null;
  document.getElementById("errorBox").innerHTML = null;
  document.getElementById("calculatedDoseBox").innerHTML = null;
  var currentBg = document.getElementById("number1").value;
  var carbsToEat = document.getElementById("number2").value;
  var carbRatio = document.getElementById("number3").value;
  var isf = document.getElementById("number4").value;
  var target = document.getElementById("number5").value;
  var toDose = (carbsToEat/carbRatio) + ((currentBg-target)/isf);
  if(currentBg == NaN || currentBg < 70 || currentBg > 999) {
    document.getElementById("errorBox").innerHTML = "Please enter your current bloodsugar in mg/DL, within the values of 70 and 999";
    document.getElementById("errorBox").style.border = "5px solid red";
    return;
  }
  if(carbsToEat == NaN || carbsToEat < 0 || carbsToEat > 300) {
    document.getElementById("errorBox").innerHTML = "Please enter the amount of carbs you are going to eat between 0g and 300g";
    document.getElementById("errorBox").style.border = "5px solid red";
    return;
  }
  if(carbRatio == NaN || carbRatio < 1 || carbRatio > 100) {
    document.getElementById("errorBox").innerHTML = "Please enter how many carbs 1 unit of insulin covers";
    document.getElementById("errorBox").style.border = "5px solid red";
    return;
  }
  if(isf == NaN ||isf < 10 || isf > 200) {
    document.getElementById("errorBox").innerHTML = "Please enter how much your blood sugar is lowered by one unit of insulin";
    document.getElementById("errorBox").style.border = "5px solid red";
    return;
  }

  document.getElementById("calculatedDoseBox").innerHTML = "Your calculated dose is: " + toDose + "U of rapid acting insulin.";
  document.getElementById("calculatedDoseBox").style.border = "4px solid green"
  }
  var carbsToEat = document.getElementById("n2")
  
</script>
